<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Write your site description here. It will be used as your sites meta description as well!">

    <title>GSoC week #2 - Gábor Molnár</title>

    <link rel="canonical" href="http://gabor.molnar.es/blog/2013/07/01/gsoc-week-number-2/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/clean-blog.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom Fonts -->
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-1277369-13', 'auto');
      ga('send', 'pageview');
    </script>

</head>


<body>

    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Gábor Molnár</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/">Home</a>
                </li>
                
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>


    <!-- Post Header -->
<header class="intro-header" style="background-image: url('/img/home-bg.jpg')">
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <h1>GSoC week #2</h1>
                    
                    <span class="meta">Posted by Gábor Molnár on July 1, 2013</span>
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">

				<p>This is the summary of the second week of my Google Summer of Code project: <a href="https://google-melange.appspot.com/gsoc/project/google/gsoc2013/molnarg/5001">HTTP/2 prototype server implementation in node.js</a>.</p>

<!-- more -->

<p>Last week was about completing the framer and implementing the <a href="http://tools.ietf.org/html/draft-ietf-httpbis-header-compression-00">header compression spec</a>.</p>

<p>The framer is now updated to the latest revision of the HTTP/2 spec, and the error handling is finalized as well. The error handling policy is as follows:</p>

<ul>
<li>when bad frame comes from the layers above, throw exceptions because that&#39;s probably a bug</li>
<li>when bad frame comes from the network, emit an error event that gets propagated to the layer above that can handle it</li>
</ul>

<p>The main focus for this week was on compression. This is basically a layer between the framer and the connection handler component. (See <a href="https://github.com/http2/wg_materials/raw/master/interim-13-06/editor-notes.pdf">this great slide deck</a> from Mark Nottingham for the overview of the layering in HTTP/2)</p>

<p>The two end of the connection have to maintain a synchronized compression state thorough the life of the connection, and it is not always easy. For example, HEADER frames may be split into multiple smaller HEADER frames when they are too large, but when sending these smaller frames, race conditions have to be prevented. If these would be just like any other frame, sending two segmented HEADER frame-set on two streams would possibly result in a race condition, and the sender could not garantee that the frames are decompressed in the same order in which they were compressed. That would lead to a desynchronized compression state. Because of this, the frames in these frame-sets must be sent strictly after each other on the wire to avoid race conditions.</p>

<p>The implementation is in a very good shape, but it is not yet ready. Serialization and deserialization are both working and tested, but the more complicated stuff largely remains for this week.</p>

<p>In the process of implementing the spec, I discovered a few problems in the text and reported them either via <a href="https://github.com/http2/compression-spec/issues/8">email</a> or with filing <a href="https://github.com/http2/compression-spec/issues/7">GitHub</a> <a href="https://github.com/http2/compression-spec/issues/6">tickets</a>. I&#39;m quite happy that I could provide useful feedback on the spec! :)</p>

<p>As always, I would be glad to receive feedback to further improve the code! Feel free to open issues in the <a href="https://github.com/molnarg/node-http2/issues">issue tracker</a>, or just <a href="mailto:gabor@molnar.es">email me</a> directly.</p>


<div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES * * */
    var disqus_shortname = 'gabor-molnar';
    
    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/blog/2013/06/23/gsoc-week-number-1/" data-toggle="tooltip" data-placement="top" title="GSoC week #1">&larr; Previous Post</a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/blog/2013/07/03/the-http-slash-2-header-compression-implementation-of-node-http2/" data-toggle="tooltip" data-placement="top" title="The HTTP/2 Header Compression implementation of node-http2">Next Post &rarr;</a>
                    </li>
                    
                </ul>

            </div>
        </div>
    </div>
</article>

<hr>


    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    <li>
                        <a href="/feed.xml">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    <li>
                        <a href="https://twitter.com/molnar_g">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://www.facebook.com/mr.gabor.molnar">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                    
                    <li>
                        <a href="https://github.com/molnarg">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">Copyright &copy; Gábor Molnár 2015</p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/clean-blog.min.js "></script>


</body>

</html>
